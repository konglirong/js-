<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>定时器的轮询</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            border: 1px solid #000;
            position: relative;
            display: block;
        }
    </style>
</head>

<body>
    <div id="box"></div>
</body>
<script>
    // function interval(callback, delay = 50) {
    //     let id = setInterval(() => callback(id), delay);
    // }
    // interval(timeId => {
    //     const div = document.querySelector("div");
    //     let left = parseInt(window.getComputedStyle(div).left)
    //     div.style.left = left + 10 + 'px'
    //     if (left >= 300) {
    //         clearInterval(timeId)
    //     }
    //     interval(timeId => {
    //         let width = parseInt(window.getComputedStyle(div).width)
    //         div.style.width = width - 10 + 'px';
    //         if (width <= 20) {
    //             clearInterval(timeId)
    //         }
    //     }, 100)
    // })

    // new Promise((resolve, reject) => {
    //     // resolve('success');
    //     reject('fail');
    // }).then(
    //     value => {
    //         console.log(value)
    //     },
    //     err => {
    //         console.log(err)
    //     }
    // )
    // box.style.display = 'none'
    // id可以直接使用

    //使用promise动态加载图片
    function loadImg(src) {
        return new Promise((resolve, reject) => {
            const image = new Image();
            image.src = src;
            image.onload = function() {
                resolve(image)
            }
            image.onerror = reject;
            document.body.appendChild(image)
        })
    }
    loadImg('https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1906469856,4113625838&fm=26&gp=0.jpg')
        .then(image => {
            image.style.width = '100px'
        });

    //封装settimeout
    function timeout(delay = 1000) {
        return new Promise(resolve => {
            setTimeout(resolve, delay)
        })
    }
    timeout(5000).then(() => {
        console.log('hello')
    })

    //async await
    async function hd() {
        return new Promise(resolve => {
            // console.log('klr');
            resolve('www.baidu.com')
        })
    }
    console.log(hd())
    hd().then(v => console.log(v))
</script>

</html>